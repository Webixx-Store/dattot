<!-- coin-analysis.component.html -->
<div class="container mt-3" *ngIf="step == 0">
  <div class="market-panel">
    <h2 class="dashboard-title">
      <i class="bi bi-currency-exchange"></i>
      Phân Tích Thị Trường Crypto
    </h2>

    <div class="table-wrapper">
      <table class="analysis-table">
        <thead>
          <tr>
            <th scope="col" class="d-none d-sm-table-cell">#</th>
            <th scope="col">
              <i class="bi bi-coin"></i>
              Tên Coin
            </th>
            <th scope="col" class="text-end">
              <i class="bi bi-currency-dollar"></i>
              Giá USD
            </th>
            <th scope="col">
              <i class="bi bi-clock"></i>
              Time Frame
            </th>
            <th scope="col" class="text-center">Actions</th>
          </tr>
        </thead>
        <tbody>
          <tr *ngFor="let coin of coins; let i = index" class="coin-row">
            <td class="d-none d-sm-table-cell">{{i + 1}}</td>
            <td class="coin-name">
              <div class="coin-info">
                <img [src]="coin.image" class="coin-icon" *ngIf="coin.image">
                <div>
                  <span class="coin-symbol">{{coin.symbol?.toUpperCase()}}</span>
                  <span class="coin-fullname">{{coin.name}}</span>
                </div>
              </div>
            </td>
            <td class="price-cell">
              <div class="price-wrapper">
                <span class="price-value">${{coin.current_price | number:'1.2-8'}}</span>
                <span class="price-change" [ngClass]="{'positive': coin.price_change_24h > 0, 'negative': coin.price_change_24h < 0}">
                  {{coin.price_change_percentage_24h}}%
                </span>
              </div>
            </td>
            <td>
              <select class="timeframe-select" [(ngModel)]="coin.timeFrame">
                <option value="1m">1 Phút</option>
                <option value="3m">3 Phút</option>
                <option value="5m">5 Phút</option>
                <option value="15m">15 Phút</option>
                <option value="30m">30 Phút</option>
                <option value="1h">1 Giờ</option>
                <option value="2h">2 Giờ</option>
                <option value="4h">4 Giờ</option>
                <option value="6h">6 Giờ</option>
                <option value="8h">8 Giờ</option>
                <option value="12h">12 Giờ</option>
                <option value="1d">1 Ngày</option>
                <option value="3d">3 Ngày</option>
                <option value="1w">1 Tuần</option>
                <option value="1M">1 Tháng</option>
              </select>
            </td>
            <td class="text-center">
              <button class="analyze-btn" (click)="analyze(coin)">
                <i class="fas fa-chart-line"></i>
                <span>Phân Tích</span>
            </button>
            </td>
          </tr>
        </tbody>
      </table>
    </div>
  </div>
</div>

  <div class="container" *ngIf="step == 1">
    <article class="entry single-entry entry-fullwidth" >
        <div class="row">
          <div class="col-lg-11">
            <div class="product-description overflow-hidden">
              <div [innerHTML]="content"></div>
            </div>
          </div>
        </div>


        <!-- Phần Donate -->
        <div class="donate-section">
          <h3>Hỗ Trợ Dự Án Phân Tích Của Tôi</h3>
          <p>Chào bạn, nếu bạn thấy các phân tích của tôi hữu ích và muốn hỗ trợ, bạn có thể gửi đóng góp qua tài khoản ngân hàng hoặc ví coin dưới đây:</p>

          <!-- Thông tin tài khoản ngân hàng -->
          <div class="bank-info">
            <h4><i class="fas fa-university"></i> Tài Khoản Ngân Hàng:</h4>
            <p><strong><i class="fas fa-building"></i> Tên Ngân Hàng:</strong> SHINHANBANK</p>
            <p><strong><i class="fas fa-credit-card"></i> Số Tài Khoản:</strong> 0582163211</p>
            <p><strong><i class="fas fa-user"></i> Chủ Tài Khoản:</strong> TRAN HOANG LINH</p>
          </div>

          <!-- Thông tin ví coin -->
          <div class="crypto-info">
            <h4><i class="fab fa-ethereum"></i> Địa Chỉ Ví Coin Metamask:</h4>
            <p><strong><i class="fab fa-bitcoin"></i>0x938f76CBc6158d3b2c23B58Fe3Aa3984D2C0819b</strong></p>
          </div>


          <!-- Lời kêu gọi donate -->
          <div class="donate-call-to-action">
            <p>Cảm ơn bạn rất nhiều vì sự hỗ trợ! Mọi đóng góp sẽ giúp tôi tiếp tục phát triển các phân tích và chia sẻ thông tin hữu ích. Nếu bạn có bất kỳ câu hỏi nào, đừng ngần ngại liên hệ với tôi ZALO: 0914527284!</p>
          </div>

          <div class="row mt-3">
            <div class="col-lg-11">
              <a  href="javascript:void(0);" (click)="goBackToStep0()" class="btn btn-primary">Quay lại trang trước</a>
            </div>
        </div>
        </div>
      </article>
  </div>


  <div class="floating-chat-icon" (click)="clickShowPopup()">
    <button class="btn btn-professional rounded-circle chat-toggle">
      <i class="fas fa-comments fs-5"></i>
    </button>
  </div>

  <app-popup [isOpen]="showPopup" (close)="closePopup()" [title]="'Giải thích về sự lựa chọn khung thời giai để phân tích'">
    <app-chat-ting></app-chat-ting>
  </app-popup>
